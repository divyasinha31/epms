<div class="app-container">
  <!-- Debug button -->
  <button (click)="forceLogout()" 
          style="position: fixed; top: 10px; right: 10px; z-index: 9999; background: red; color: white; padding: 5px;">
    Debug Logout
  </button>

  <!-- Authenticated Layout -->
  <div class="authenticated-layout" *ngIf="isLoggedIn && currentUser">
    <!-- Header -->
    <app-header [currentUser]="currentUser" (toggleSidebar)="toggleSidebar()"></app-header>
    
    <!-- Main Layout -->
    <div class="main-layout">
      <!-- Sidebar -->
      <app-sidebar [currentUser]="currentUser" [isOpen]="sidebarOpen" class="sidebar"></app-sidebar>
      
      <!-- Content Area -->
      <main class="content-area" [class.sidebar-open]="sidebarOpen">
        <router-outlet></router-outlet>
      </main>
    </div>
  </div>

  <!-- Login Layout -->
  <div class="login-layout" *ngIf="!isLoggedIn">
    <router-outlet></router-outlet>
  </div>

  <!-- Loading State -->
  <div class="loading-layout" *ngIf="isLoggedIn && !currentUser">
    <mat-spinner></mat-spinner>
    <p>Loading...</p>
  </div>
</div>